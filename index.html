		<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Swipe between maps</title>
    <meta
      name="viewport"
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script src="../.env"></script>
    <script src='https://unpkg.com/maplibre-gl@4.5.0/dist/maplibre-gl.js'></script>
    <!--<script src="https://unpkg.com/maplibre-gl@2.1.6/dist/maplibre-gl.js"></script>-->
    <link
      href="https://unpkg.com/maplibre-gl@2.1.6/dist/maplibre-gl.css"
      rel="stylesheet"
    />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
	  .header{
		position: absolute;
		margin: 0;
		padding: 0px;
		background-color: black;
		color: white;
		text-align: center;
	  }
	  
	  .header > h3 {
	  
	  }
    </style>
  </head>

  <body>
    <style>
      body {
        overflow: hidden;
      }

      body * {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }

      .map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
	  
    </style>
    <script src="maplibre-gl-compare.js"></script>
    <link rel="stylesheet" href="maplibre-gl-compare.css" type="text/css" />
	
	<header class="header">
		<h2>Mira como la fundación Farallones a restaurado la naturaleza, el diversos bosques </h2>
    </header>
    <div id="comparison-container">
      <div id="before" class="map"></div>
      <div id="after" class="map"></div>
    </div>
    <script>
      var beforeMap = new maplibregl.Map({
        container: "before",
        style: {
            version: 8,
            glyphs: 'https://fonts.openmaptiles.org/{fontstack}/{range}.pbf',
            sources: {
                osm: {
                    type: 'raster',
                    tiles: ['https://api.maptiler.com/tiles/satellite-v2/{z}/{x}/{y}.jpg?key=W5lV2tLMxZAza9GGxomX#-0.2/0.00000/5.62500'],
                    tileSize: 256,
                    attribution: '&copy; OpenStreetMap Contributors',
                    maxzoom: 21,
                    minzoom: 12,
                },
                // Use a different source for terrain and hillshade layers, to improve render quality
                terrainSource: {
                    type: 'raster-dem',
                    url: 'https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=W5lV2tLMxZAza9GGxomX',
                    tileSize: 256,
                }
            },
            layers: [
                {
                    id: 'osm',
                    type: 'raster',
                    source: 'osm'
                }
            ],
            terrain: {
                source: 'terrainSource',
                exaggeration: 1
            }
        },
        center: [-76.6725, 3.33],
        zoom: 13.41,
      });

      var afterMap = new maplibregl.Map({
        container: "after",
        style: {
            version: 8,
            sources: {
                // Use a different source for terrain and hillshade layers, to improve render quality
                //terrainSource: {
                //    type: 'raster-dem',
                //    url: 'https://api.maptiler.com/tiles/terrain-rgb-v2/tiles.json?key=W5lV2tLMxZAza9GGxomX',
                //    tileSize: 256,
                //}
            }//,
            //terrain: {
            //    source: 'terrainSource',
            //    exaggeration: 1
            //}
            ,
            layers: []
        },
        center: [-76.6725, 3.33],
        zoom: 13.41,
      });

      afterMap.on('load', ()=>{
        //Add Raster
        afterMap.addSource('wms-test-source', {
            'type': 'raster',
            // use the tiles option to specify a WMS tile source URL
            // https://maplibre.org/maplibre-style-spec/sources/
            'tiles': ['http://uvmanos.gisfer.net:8080/geoserver/farallones/wms?service=WMS&version=1.1.0&request=GetMap&layers=farallones%3A1982&srs=EPSG%3A3857&styles=&format=image%2Fpng&transparent=true&bbox={bbox-epsg-3857}&width=256&height=256'
            ],
            'tileSize': 256,
            'attribution': 'Fundación Farallones &copy',
            'bounds': [-76.72182325, 3.284880821, -76.623399402, 3.383541768]
        });
        afterMap.addLayer(
            {
              'id': 'farallones-layer',
              'type': 'raster',
              'source': 'wms-test-source',
              "layout": {
                          "visibility": "visible"
                      },
              'paint': {}
            },
            //'farallones'
        );

        //Vector tipo JSON
        afterMap.addSource('my_maine',{
          'type': 'geojson',
          'data': 'Datos/geojson/PNN_Farallones.geojson'
        });

        afterMap.addLayer({
          'id': 'PNN-layer',
          'type': 'fill',
          'source': 'my_maine',
          'layout': {
              'visibility': 'visible'
          },
          'paint': {
              'fill-color': '#00FF00',
              'fill-opacity': 0.0,
          } 
        });

        afterMap.addLayer({
          'id': 'PNN-layer2',
          'type': 'line',
          'source': 'my_maine',
          'layout': {
              'visibility': 'visible'
          },
          'paint': {
              'line-color': '#00FF00',
              'line-width': 2,
          } 
        });

        beforeMap.addSource('my_maine',{
          'type': 'geojson',
          'data': 'Datos/geojson/PNN_Farallones.geojson'
        });

        beforeMap.addLayer({
          'id': 'PNN-layer',
          'type': 'fill',
          'source': 'my_maine',
          'layout': {
              'visibility': 'visible'
          },
          'paint': {
              'fill-color': '#00FF00',
              'fill-opacity': 0.0,
          } 
        });

        beforeMap.addLayer({
          'id': 'PNN-layer2',
          'type': 'line',
          'source': 'my_maine',
          'layout': {
              'visibility': 'visible'
          },
          'paint': {
              'line-color': '#00FF00',
              'line-width': 2,
          } 
        });

      });

      // A selector or reference to HTML element
      var container = "#comparison-container";

      var map = new maplibregl.Compare(beforeMap, afterMap, container, {
        // Set this to enable comparing two maps by mouse movement:
        mousemove: true
      });

      //AÑADIR POPUP
      const beforePopup = new maplibregl.Popup({closeButton: false})
        .setLngLat([-76.6725, 3.33])
        .setHTML('<h1>Año 2024</h1>')
        .addTo(beforeMap);

        //AÑADIR POPUP
      const afterPopup = new maplibregl.Popup({closeButton: false})
        .setLngLat([-76.6725, 3.33])
        .setHTML('<h1>Año 1982</h1>')
        .addTo(afterMap);

      /*beforeMap.addControl(
        new maplibregl.NavigationControl({
            visualizePitch: true,
            showZoom: true,
            showCompass: true
        })
      );

      afterMap.addControl(
        new maplibregl.NavigationControl({
            visualizePitch: true,
            showZoom: true,
            showCompass: true
        })
      );

      beforeMap.addControl(
        new maplibregl.TerrainControl({
        source: 'terrainSource',
        exaggeration: 1
        }) 
      );

      afterMap.addControl(
        new maplibregl.TerrainControl({
        source: 'terrainSource',
        exaggeration: 1
        }) 
      );*/

    </script>
  </body>
</html>